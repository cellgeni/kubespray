
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung
spec:
  selector:
    matchLabels:
      app: fetal-lung
  replicas: 1
  template:
    metadata: 
      name: fetal-lung
      labels:
        app: fetal-lung
    spec:
      volumes:
        - name: indexfiles
          emptyDir: {}
      containers:
      - image: nginx
        imagePullPolicy: IfNotPresent
        name: fetal-lung
        ports:
        - containerPort: 80
          name: http
        command: ["/bin/sh", "-c", "cp -r /data/kubespray/sanger/sites/fetal-lung/site/. /usr/share/nginx/html/ && nginx -g 'daemon off;'"]
        volumeMounts:
          - name: indexfiles
            mountPath: /data
        resources:
          requests:
            memory: "128M"
            cpu: "0.1"
          limits:
            memory: "512M"
            cpu: "0.7"
      initContainers:
      - name: pull-data
        image: alpine/git
        command: ['/bin/sh', '-c', 'git -C /data/kubespray pull || git clone https://github.com/cellgeni/kubespray /data/kubespray']
        volumeMounts:
          - name: indexfiles
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-main
spec:
  selector:
    matchLabels:
      app: fetal-lung-main
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-main
      labels:
        app: fetal-lung-main
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/191204DaweiRNA.h5ad -t 'FetalLung (log-normalized)' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "6Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/191204DaweiRNA.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-rbc
spec:
  selector:
    matchLabels:
      app: fetal-lung-rbc
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-rbc
      labels:
        app: fetal-lung-rbc
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung-rbc
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/200222RBC.h5ad -t 'RBC' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "2Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/200222RBC.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-epi
spec:
  selector:
    matchLabels:
      app: fetal-lung-epi
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-epi
      labels:
        app: fetal-lung-epi
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung-epi
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/200226Epi.h5ad -t 'Epi' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "2Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/200226Epi.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-endo
spec:
  selector:
    matchLabels:
      app: fetal-lung-endo
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-endo
      labels:
        app: fetal-lung-endo
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung-endo
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/200223Endo.h5ad -t 'Endo' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "2Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/200223Endo.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-fsm
spec:
  selector:
    matchLabels:
      app: fetal-lung-fsm
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-fsm
      labels:
        app: fetal-lung-fsm
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung-fsm
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/200307FSM.h5ad -t 'FSM' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "1Gi"
            cpu: "0.5"
          limits:
            memory: "4Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/200307FSM.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-imm
spec:
  selector:
    matchLabels:
      app: fetal-lung-imm
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-imm
      labels:
        app: fetal-lung-imm
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.14.1
        imagePullPolicy: IfNotPresent
        name: fetal-lung-imm
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/200307Imm.h5ad -t 'Imm' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "2Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/200307Imm.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster0
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster0
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster0
      labels:
        app: fetal-lung-cluster0
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster0
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_0.h5ad -t 'Cluster 0, 200528' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_0.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster1
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster1
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster1
      labels:
        app: fetal-lung-cluster1
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster1
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_1.h5ad -t 'Cluster 1, 200612' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_1.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster2
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster2
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster2
      labels:
        app: fetal-lung-cluster2
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster2
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_2.h5ad -t 'Cluster 2, 200618' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_2.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster3
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster3
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster3
      labels:
        app: fetal-lung-cluster3
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster3
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_3.h5ad -t 'Cluster 3, 200701' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_3.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster4
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster4
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster4
      labels:
        app: fetal-lung-cluster4
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster4
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_4.h5ad -t 'Cluster 4, 200704' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_4.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster5
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster5
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster5
      labels:
        app: fetal-lung-cluster5
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster5
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_5.h5ad -t 'Cluster 5, 200709' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_5.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster6
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster6
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster6
      labels:
        app: fetal-lung-cluster6
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster6
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_6.h5ad -t 'Cluster 6, 200711' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_6.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster7
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster7
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster7
      labels:
        app: fetal-lung-cluster7
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster7
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_7.h5ad -t 'Cluster 7, 200715' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_7.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-cluster8
spec:
  selector:
    matchLabels:
      app: fetal-lung-cluster8
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-cluster8
      labels:
        app: fetal-lung-cluster8
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-cluster8
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/cluster_8.h5ad -t 'Cluster 8, 200716' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "3Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/cluster_8.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-10domains
spec:
  selector:
    matchLabels:
      app: fetal-lung-10domains
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-10domains
      labels:
        app: fetal-lung-10domains
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-10domains
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/10_domains.h5ad -t 'Fetal Lung 10 domains' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/10_domains.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---
---
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201119c0filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201119c0filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201119c0filtered
      labels:
        app: fetal-lung-201119c0filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201119c0filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201119C0filtered.h5ad -t '201119C0filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201119C0filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201119c0
spec:
  selector:
    matchLabels:
      app: fetal-lung-201119c0
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201119c0
      labels:
        app: fetal-lung-201119c0
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201119c0
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201119C0.h5ad -t '201119C0' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201119C0.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201119c1filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201119c1filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201119c1filtered
      labels:
        app: fetal-lung-201119c1filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201119c1filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201119C1filtered.h5ad -t '201119C1filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201119C1filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201119c1
spec:
  selector:
    matchLabels:
      app: fetal-lung-201119c1
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201119c1
      labels:
        app: fetal-lung-201119c1
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201119c1
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201119C1.h5ad -t '201119C1' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201119C1.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201120c2filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201120c2filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201120c2filtered
      labels:
        app: fetal-lung-201120c2filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201120c2filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201120C2filtered.h5ad -t '201120C2filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201120C2filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201120c2
spec:
  selector:
    matchLabels:
      app: fetal-lung-201120c2
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201120c2
      labels:
        app: fetal-lung-201120c2
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201120c2
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201120C2.h5ad -t '201120C2' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201120C2.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201121c3filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201121c3filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201121c3filtered
      labels:
        app: fetal-lung-201121c3filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201121c3filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201121C3filtered.h5ad -t '201121C3filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201121C3filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201121c3
spec:
  selector:
    matchLabels:
      app: fetal-lung-201121c3
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201121c3
      labels:
        app: fetal-lung-201121c3
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201121c3
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201121C3.h5ad -t '201121C3' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201121C3.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201122c4filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201122c4filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201122c4filtered
      labels:
        app: fetal-lung-201122c4filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201122c4filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201122C4filtered.h5ad -t '201122C4filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201122C4filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201122c4
spec:
  selector:
    matchLabels:
      app: fetal-lung-201122c4
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201122c4
      labels:
        app: fetal-lung-201122c4
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201122c4
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201122C4.h5ad -t '201122C4' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201122C4.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201123c5filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201123c5filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201123c5filtered
      labels:
        app: fetal-lung-201123c5filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201123c5filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201123C5filtered.h5ad -t '201123C5filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201123C5filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201123c5
spec:
  selector:
    matchLabels:
      app: fetal-lung-201123c5
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201123c5
      labels:
        app: fetal-lung-201123c5
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201123c5
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201123C5.h5ad -t '201123C5' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201123C5.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201123c6filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201123c6filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201123c6filtered
      labels:
        app: fetal-lung-201123c6filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201123c6filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201123C6filtered.h5ad -t '201123C6filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201123C6filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201123c6
spec:
  selector:
    matchLabels:
      app: fetal-lung-201123c6
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201123c6
      labels:
        app: fetal-lung-201123c6
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201123c6
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201123C6.h5ad -t '201123C6' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201123C6.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201124c7filtered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201124c7filtered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201124c7filtered
      labels:
        app: fetal-lung-201124c7filtered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201124c7filtered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201124C7filtered.h5ad -t '201124C7filtered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201124C7filtered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201124c7
spec:
  selector:
    matchLabels:
      app: fetal-lung-201124c7
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201124c7
      labels:
        app: fetal-lung-201124c7
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201124c7
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201124C7.h5ad -t '201124C7' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201124C7.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---



---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201125assembled10domains
spec:
  selector:
    matchLabels:
      app: fetal-lung-201125assembled10domains
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201125assembled10domains
      labels:
        app: fetal-lung-201125assembled10domains
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201125assembled10domains
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201125Assembled10Domains.h5ad -t '201125Assembled10Domains' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201125Assembled10Domains.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---


---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fetal-lung-201125assembled10domainsfiltered
spec:
  selector:
    matchLabels:
      app: fetal-lung-201125assembled10domainsfiltered
  replicas: 1
  template:
    metadata: 
      name: fetal-lung-201125assembled10domainsfiltered
      labels:
        app: fetal-lung-201125assembled10domainsfiltered
    spec:
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: fetal-lung-pvc
      containers:
      - image: quay.io/cellgeni/cellxgene:0.15.0
        imagePullPolicy: IfNotPresent
        name: fetal-lung-201125assembled10domainsfiltered
        ports:
        - containerPort: 5005
          name: cellxgene
        command: ["/bin/sh"]
        args: ["-c", "yes | cellxgene launch /data/201125Assembled10DomainsFiltered.h5ad -t '201125Assembled10DomainsFiltered' --host 0.0.0.0 --port 5005 --about https://fetal-lung.cellgeni.sanger.ac.uk --scripts https://fetal-lung.cellgeni.sanger.ac.uk/piwik.js --disable-annotations"]
        volumeMounts:
          - name: data
            mountPath: /data
        resources:
          requests:
            memory: "512M"
            cpu: "0.5"
          limits:
            memory: "8Gi"
            cpu: 1
      initContainers:
      - name: pull-data
        imagePullPolicy: IfNotPresent
        image: garland/aws-cli-docker
        command: ['aws','--endpoint-url=https://cog.sanger.ac.uk', 's3', 'cp', 's3://cellgeni/fetal-lung/201125Assembled10DomainsFiltered.h5ad', '/data']
        env:
          - name: AWS_ACCESS_KEY_ID
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_ACCESS_KEY_ID
          - name: AWS_SECRET_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: s3-secret
                key: AWS_SECRET_ACCESS_KEY
        volumeMounts:
          - name: data
            mountPath: /data
---